= Antora

image:icons/antora.png[Antora logo,50,50] 

With a tagline that claims it's a "site generator for tech writers who love writing AsciiDocs" I had to give Antora a try. In fact, it's what I wrote this portfolio with. Compared to Flare and Hugo, it stands out in its ability to leverage Git and AsciiDoc to deliver scalable docs with ease.

== Structured configuration

Antora's project structure is strict, which is actually a strength. It requires you to have separate repositories for your content files, build configuration, and site's theming. This compartmentalization enforces a standard where commits occur in their own context, making complex projects easier to manage. Edits to your `antora-playbook.yml`, for example, won't show up in a PR that updates feature docs. While there's a slight learning curve to adopt Antora's conventions, it's worth it to have distinct separation of concerns. 

Since Antora sources content from repo URLs, Git becomes a powerful tool in your deployment pipeline. You can run different branches of your playbook project that automatically deploy to production or test environments, depending on how you define branches.

For example, I've configured this project to deploy feature branches according to a pattern search for `'feature/*`. My favorite part of this configuration is that it's dynamic. If new feature branches get created, they're generated the next time the site builds. Once a feature branch is deleted, it's removed on the next build.

[source,yaml]
----
content:
  sources:
  - url: https://github.com/technicallyawriter/portfolio-docs.git 
    branches: [main, 'feature/*']
----

Click the version toolbar in the lower-left corner of the screen to display these feature branches. 

== Easy scaling

Want to add new projects to your docs site? Just add the Git repo to the sources block in your `antora-playbook.yml`, specify a branch, and a `nav.adoc` file. Once configured, it's included in the next build.

== AsciiDoc over traditional Markdown

Traditional Markdown is wonderful in its simplicity. AsciiDoc maintains this simplicity but with a much richer feature set geared toward tech writing. Two of my favorite AsciiDoc features are directives that help with content reuse and single-sourcing docs: `xref:_includes_[\includes::[]]` and `xref:_conditional_directives_[ifdef[]]`.

AsciiDoc is the native syntax in Antora. In fact, Antora's lead maintainer (link:https://github.com/mojavelinux[Dan Allen]) is also the Asciidoctor project lead. Compatibility between the two is tight.
Traditional Markdown is great for documentation, but as a tech writer, I prefer for the power and flexibility of AsciiDoc.

=== Includes

great tool. includes the whole file by default. 

including a section of the file. always scared of doing it by line, so do it by "tag" if you're trying to grab a section of the page. if using tags, you'll need to filter them out, though! `\include::file-with-snippets.adoc[tag=!*]`

=== Conditional directives

include or exclude based on these attributes. use for administrator and internal notes.

balancing act in terms of organization: for smaller interspersed conditions (like an internal note), just single-source it and have all conditions display in the same doc. If this becomes challenging due to the length of the doc (and readability suffers), then determine what needs to be made more modular and separate out the file with its own attributes (and `include::` where appropriate back in the "main" doc). Keep scale in mind but don't automatically build something for infinite scaling (this introduces needless complexity). Instead, keep the topic open and try to get ahead of this as needed rather than all at once in the beginning.

Attributes: Works similar to how Hugo uses front matter (creates metadata).

Single source content (and output depending on audience) with attributes that you include or exclude. This means you don't have to have two versions of the same doc--it all lives on the same page (balancing act). Can define attributes in dedicated files and source them.

example attributes file: `general-attribues.adoc`, `administrator-attributes.adoc`, `internal-attributes.adoc`

----
== General Guide

This guide is intended for a general audience.
// ... general content ...

[IMPORTANT]
ifdef::admin[]
.Administrator Note
=== Admins Only

This information is relevant to system administrators.
endif::admin[]

[TIP]
ifdef::internal[]
.Internal Note
=== Internal Use Only

This section is meant for internal stakeholders.
endif::internal[]
----

== Versioning

Usually producing versioned docs isn't that tightly declared into your project's configuration. With Antora, it's explicitly managed within the playbook.

== AsciiDoctor-pdf for print

Antora is essentially a wrapper for AsciiDoctor with support for link:https://www.npmjs.com/package/asciidoctor-pdf[AsciiDoctor-pdf].

=== Install AsciiDoctor-pdf
```NPM
npm install asciidoctor-pdf
```

=== Custom PDF styling
Extend the default PDF theme to your liking by adjusting values in a separate YAML file.

```YAML
extends: default
base:
  font-color: #ff0000
```

**TIP:** refer to the link:https://github.com/asciidoctor/asciidoctor-pdf/blob/main/docs/theming-guide.adoc[AsciiDoctor PDF Theming Guide,window=_blank] for more details.
